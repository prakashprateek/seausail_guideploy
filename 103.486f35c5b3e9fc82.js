"use strict";(self.webpackChunkseausailgui=self.webpackChunkseausailgui||[]).push([[103],{103:(A,d,a)=>{a.r(d),a.d(d,{CategoryModule:()=>c});var m=a(6895),n=a(433),C=a(1634),e=a(1571),l=a(606),h=a(8167),f=a(3713),b=a(7185),T=a(2479),y=a(4333);function P(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",7),e.NdJ("click",function(){const p=e.CHM(o).$implicit,u=e.oxw(2);return e.KtG(u.onEditClick(p))}),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()}if(2&i){const o=t.$implicit;e.xp6(3),e.Oqu(o.CategoryName),e.xp6(2),e.Oqu(o.CategoryDesctiption),e.xp6(2),e.Oqu(o.IsActive)}}function F(i,t){1&i&&(e.TgZ(0,"span",8),e._uU(1," No Record Found..."),e.qZA())}const x=function(i,t,o){return{itemsPerPage:i,currentPage:t,totalItems:o}};function v(i,t){if(1&i&&(e.ynx(0),e.TgZ(1,"table",4)(2,"tr")(3,"th"),e._uU(4,"category Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"category Description"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Is Active"),e.qZA()(),e.YNc(9,P,8,3,"tr",5),e.ALo(10,"paginate"),e.YNc(11,F,2,0,"span",6),e.qZA(),e.BQk()),2&i){const o=e.oxw();e.xp6(9),e.Q6J("ngForOf",e.xi3(10,2,o.categoryList,e.kEZ(5,x,o.itemsPerPage,o.p,o.total))),e.xp6(2),e.Q6J("ngIf",0==o.categoryList.length)}}function _(i,t){if(1&i){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",9),e.NdJ("ngSubmit",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.submit())}),e.TgZ(2,"div",10)(3,"label",11),e._uU(4,"Category Name"),e.qZA(),e._UZ(5,"input",12)(6,"control-messages",13),e.qZA(),e.TgZ(7,"div",10)(8,"label",14),e._uU(9,"Category Description"),e.qZA(),e._UZ(10,"textarea",15)(11,"div",16)(12,"control-messages",13),e.qZA(),e.TgZ(13,"div",17)(14,"div",18)(15,"input",19),e.NdJ("change",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.activeState=!s.activeState)}),e.qZA(),e.TgZ(16,"label",20),e._uU(17,"Is Active"),e.qZA()()(),e.TgZ(18,"button",21),e._uU(19,"Submit"),e.qZA()(),e.BQk()}if(2&i){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.categoryMappingForm),e.xp6(5),e.Q6J("controlkey",null==o.categoryMappingForm||null==o.categoryMappingForm.controls?null:o.categoryMappingForm.controls.CategoryName),e.xp6(6),e.Q6J("controlkey",null==o.categoryMappingForm||null==o.categoryMappingForm.controls?null:o.categoryMappingForm.controls.CategorDescription),e.xp6(3),e.Q6J("checked",o.activeState)}}class g{constructor(t,o,r,s,p,u){this._route=t,this._router=o,this.fb=r,this._adminService=s,this._encryptedStorage=p,this.toastr=u,this.categoryList=[],this.submitted=!1,this.isFormView=!1,this.isModify=!1,this.activeState=!0,this.modifyObj={},this.categoryMappingForm=this.fb.group({CategoryName:["",n.kI.required,[this.dudblicateCheck_asyncValidator("CategoryName")]],CategorId:[0],CategorDescription:[""]}),this.p=1,this.total=0,this.itemsPerPage=10,this.mSearchParamList={SearchCol:"",SearchType:"",SearchVal:""},this.mGridPaginationData={TotalRecord:0,RecordFrom:0,RecordTo:0,TotalPageCount:0},this.mGridViewProps={PageNumber:1,StartRecord:1,EndRecord:10,RecordPerPage:this.itemsPerPage,SortCol:"CategoryId",SortOrder:"asc",RequireRowCount:"Y",SearchParamList:[]}}ngOnInit(){this.getCategoryList()}toggleFormView(){this.isFormView=!this.isFormView,this.categoryMappingForm.get("CategorId").setValue(0),this.categoryMappingForm.get("CategoryName").setValue(""),this.categoryMappingForm.get("CategorDescription").setValue(""),this.activeState=!1,this.modifyObj.categoryId=0}onEditClick(t){this.isFormView=!0,this.categoryMappingForm.get("CategorId").setValue(t.CategoryId),this.categoryMappingForm.get("CategoryName").setValue(t.CategoryName),this.categoryMappingForm.get("CategorDescription").setValue(t.CategoryDesctiption),this.activeState="ACTIVE"==t.IsActive.toUpperCase(),this.modifyObj.categoryId=t.CategoryId,this.getCategoryList()}getCategoryList(){this._adminService.GetCategoryMasterView(this.mGridViewProps).subscribe(t=>{t.hasOwnProperty("Table")&&t.Table.length>0&&(this.categoryList=t.Table),t.hasOwnProperty("Table1")&&t.Table1.length>0&&(this.total=t.Table1[0].TotalRecord,this.mGridPaginationData.TotalRecord=t.Table1[0].TotalRecord,this.mGridPaginationData.RecordFrom=t.Table1[0].RecordFrom,this.mGridPaginationData.RecordTo=t.Table1[0].RecordTo,this.mGridPaginationData.TotalPageCount=t.Table1[0].TotalPageCount)})}pageChangeEvent(t){this.p=t,this.mGridViewProps.PageNumber=this.p,this.mGridViewProps.StartRecord=this.mGridViewProps.RecordPerPage*(this.mGridViewProps.PageNumber-1)+1,this.mGridViewProps.EndRecord=this.mGridViewProps.PageNumber==this.mGridPaginationData.TotalPageCount?this.mGridPaginationData.TotalRecord:this.mGridViewProps.StartRecord+this.mGridViewProps.RecordPerPage-1,this.getCategoryList()}dudblicateCheck_asyncValidator(t){return o=>this.checkifValidationIsTrue(o,t).then(r=>r?{cus_Validate_Article_API:r}:null)}checkifValidationIsTrue(t,o){return new Promise((r,s)=>{r(null)})}markFormGroupTouched(t){(t||t.disabled)&&Object.values(t.controls).forEach(o=>{o.markAsTouched(),o.controls&&this.markFormGroupTouched(o)})}submit(){this.markFormGroupTouched(this.categoryMappingForm),this.categoryMappingForm.valid&&(console.log("categoryMappingForm",this.categoryMappingForm),this._encryptedStorage.get(C.d.UserId).then(t=>{this._adminService.ManageCategory({loginUserId:t,actionKey:"",dbOperation:"I",objCategoryInfo:{categoryId:this.modifyObj.categoryId,categoryName:this.categoryMappingForm.controls.CategoryName.value,categoryDesctiption:this.categoryMappingForm.controls.CategorDescription.value,isActive:this.activeState}}).subscribe(r=>{r.status>=1?("#ADDSUCCESS#"==r.message?r.message="Category save successfully!":"#ALREADYEXISTS#"==r.message?r.message="Category already exists!":"#UPDATESUCCESS#"==r.message&&(r.message="Category successfully updated!"),1==r.status?(this.toggleFormView(),this.toastr.success("",r.message,{timeOut:5e3}),window.location.reload()):this.toastr.error("",r.message,{timeOut:5e3})):this.toastr.error("",r.message,{timeOut:5e3})},r=>{console.log("error",r)})}))}}g.\u0275fac=function(t){return new(t||g)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(n.qu),e.Y36(h.l),e.Y36(f.P),e.Y36(b._W))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-category"]],decls:8,vars:3,consts:[[2,"max-width","1000px","margin","auto"],[1,"popup-title"],[1,"popup-title","btn","btn-primary",3,"click"],[4,"ngIf"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"URLLink",3,"click"],[1,"text-danger"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","CategorName",1,"form-label"],["type","input","formControlName","CategoryName","id","CategorName","aria-describedby","CategorNameDes",1,"form-control"],[3,"controlkey"],["for","CategorDescription",1,"form-label"],["type","input","id","CategorDescription","formControlName","CategorDescription","aria-describedby","CategorDescriptionDes",1,"form-control"],["id","CategorDescriptionDes",1,"form-text"],[1,"mb-3","form-check","p-0"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked",1,"form-check-input",3,"checked","change"],["for","flexSwitchCheckChecked",1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"h5",1),e._uU(3," Category Manage "),e.qZA(),e.TgZ(4,"h5",2),e.NdJ("click",function(){return o.toggleFormView()}),e._uU(5),e.qZA(),e.YNc(6,v,12,9,"ng-container",3),e.YNc(7,_,20,4,"ng-container",3),e.qZA(),e.BQk()),2&t&&(e.xp6(5),e.hij(" ",o.isFormView?"Back to Category List":"Add New Category"," "),e.xp6(1),e.Q6J("ngIf",!o.isFormView),e.xp6(1),e.Q6J("ngIf",o.isFormView))},dependencies:[m.sg,m.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,T.w,y._s],styles:[".text-danger{color:#dc3545!important}.URLLink{cursor:pointer;text-decoration:underline;color:#00f}table,th,td{border:1px solid grey;border-collapse:collapse;padding:5px}table tr:nth-child(odd){background-color:#f1f1f1}table tr:nth-child(even){background-color:#fff}.error_msg{display:block}\n"],encapsulation:2});var S=a(5206);const Z=[{path:"",component:g}];class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({providers:[h.l],imports:[m.ez,l.Bz.forChild(Z),n.UX,S.G,y.JX,l.Bz]})}}]);