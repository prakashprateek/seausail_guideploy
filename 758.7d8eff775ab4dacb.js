"use strict";(self.webpackChunkseausailgui=self.webpackChunkseausailgui||[]).push([[758],{758:(S,_,o)=>{o.r(_),o.d(_,{CartDetailsModule:()=>g});var p=o(6895),u=o(606),h=o(9632),s=o(433),C=o(9032),b=o(9549),M=o(3238),r=o(1634),O=o(56),t=o(1571),x=o(8386),f=o(3713),v=o(7185),y=o(8858);function w(c,n){1&c&&(t.TgZ(0,"div",26)(1,"h2"),t._uU(2,"Log in or sign up to book"),t.qZA(),t.TgZ(3,"form")(4,"div",20)(5,"label"),t._uU(6,"Username or Email"),t.qZA(),t.TgZ(7,"div",21),t._UZ(8,"input",27),t.qZA()(),t.TgZ(9,"div",20)(10,"label"),t._uU(11,"Password"),t.qZA(),t.TgZ(12,"div",21),t._UZ(13,"input",28),t.qZA()(),t.TgZ(14,"a",29)(15,"span"),t._uU(16,"Continue"),t.qZA()()(),t.TgZ(17,"p",30),t._uU(18,"Or"),t.qZA(),t.TgZ(19,"div",31)(20,"div",32)(21,"a"),t._UZ(22,"img",33),t.qZA(),t.TgZ(23,"a"),t._UZ(24,"img",34),t.qZA(),t.TgZ(25,"a"),t._UZ(26,"img",35),t.qZA()(),t.TgZ(27,"div")(28,"a"),t._UZ(29,"i",36),t._uU(30," Continue with email"),t.qZA()()()())}class l{constructor(n,e,a,i,m){this._activatedRoute=n,this._router=e,this._userService=a,this._encryptedStorage=i,this.toastr=m,this.showReserveBtn=!1,this.TopYachts={pagination:{el:".swiper-pagination",clickable:!0},autoHeight:!0,allowTouchMove:!0,autoplay:{delay:6e3,disableOnInteraction:!0},navigation:!0,centeredSlides:!0,breakpoints:{1100:{slidesPerView:4.1,spaceBetween:30},900:{slidesPerView:3.1,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},600:{slidesPerView:2.2,spaceBetween:20},425:{slidesPerView:1.5,spaceBetween:20},300:{slidesPerView:1.1,spaceBetween:20}},loop:!0}}ngOnInit(){this._encryptedStorage.get(r.d.UserId).then(n=>{this.UserId=n,this._encryptedStorage.get(r.d.HasLoggedIn).then(e=>{this.IsLoggedIn=e})}),this._activatedRoute.paramMap.subscribe(n=>{this.productId=n.get("productid"),this.productId=this._encryptedStorage.decrypt(this.productId),console.log("this.productId",this.productId),this._userService.GetProperties({UserId:0}).subscribe(a=>{a.objPropertyInfoList.length&&(this.objProduct=a.objPropertyInfoList.filter(i=>i.propertyId==Number(this.productId))[0]),console.log("productList",this.objProduct)},a=>{})})}redirectTocheckyachts(){this.bookingConfirm()}bookingConfirm(){this.saveBookingPriceDetails()}saveBookingPriceDetails(){this._encryptedStorage.get(r.o.objBookingPriceDetail).then(n=>{let e=JSON.parse(n);this._userService.SaveProductBookingPriceDetails({userId:this.UserId,objBookingPriceDetail:{BookingPriceId:e.BookingPriceId,BookingUOM:this.objProduct.objPropertyPriceInfo.priceUOMId,DiscountPrice:e.DiscountPrice,ProductPrice:e.ProductPrice,TaxAmount:e.TaxAmount,TaxablePrice:e.TaxablePrice,TotalBookingPrice:e.TotalBookingPrice,TotalPax:e.TotalPax,UOMTimes:e.UOMTimes,TotalPrice:e.TotalPrice}}).subscribe(i=>{console.log("SaveProductBookingPriceDetails",i),1==i.status?this.saveBookingDetails(i.bookingPriceId):this.toastr.error("","something went worng",{timeOut:5e3})},i=>{this.toastr.error("","something went worng",{timeOut:5e3}),console.log(i)})})}saveBookingDetails(n){this._encryptedStorage.get(r.o.adultValue).then(e=>{this._encryptedStorage.get(r.o.childValue).then(a=>{this._encryptedStorage.get(r.o.endDate).then(i=>{this._encryptedStorage.get(r.o.endTime).then(m=>{this._encryptedStorage.get(r.o.infantValue).then(T=>{this._encryptedStorage.get(r.o.startDate).then(U=>{this._encryptedStorage.get(r.o.startTime).then(I=>{this._encryptedStorage.get(r.o.objBookingPriceDetail).then(k=>{let P=JSON.parse(k),B={userId:this.UserId,objUserProductBookingInfo:{bookingId:0,productId:this.productId,fromDate:this.transformDate(U),toDate:this.transformDate(i),FromTime:I,ToTime:m,PeopleCount:P.TotalPax,AdultCount:e,InfantCount:T,ChildCount:a,TotalPrice:P.TotalPrice,Currency:O.R.currency.Singapur,BookingPriceId:n,notes:this.notes,byUserId:this.UserId,bookStatusId:1}};this._userService.SaveUserProductBooking(B).subscribe(d=>{console.log("SaveUserProductBooking",d),1==d.status?(this.toastr.success("",d.message,{timeOut:5e3}),this._router.navigate(["/cart/complete/",this._encryptedStorage.encrypt(this.productId)])):this.toastr.error("",d.message,{timeOut:5e3})},d=>{this.toastr.error("","something went worng",{timeOut:5e3}),console.log(d)})})})})})})})})})}transformDate(n){return new p.uU("en-US").transform(n,"yyyy-MM-dd")}}l.\u0275fac=function(n){return new(n||l)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(x.K),t.Y36(f.P),t.Y36(v._W))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-cartdetails"]],decls:45,vars:5,consts:[[1,"checkout_page","padding_sec"],[1,"inner_page"],[1,"breadcrumb"],[1,"las","la-angle-left"],[1,"order_info"],[1,"order_details"],[1,"right_details"],[3,"productId","showReserveBtn"],["class","login_sec",4,"ngIf"],[1,"order_payment"],[1,"bill_overview"],[1,"order_overview"],[1,"thumbnail"],[3,"src"],[1,"order_indetails"],[1,"order_tags"],[1,"las","la-star"],[1,"lab","la-gratipay"],[1,"covered"],["src","assets/img/logo.jpg","alt","Logo"],[1,"form_group"],[1,"form_area"],["name","","id","","rows","3",3,"ngModel","ngModelChange"],[1,"additional_info"],[1,"text-center"],[1,"global_btn","primary_btn",3,"click"],[1,"login_sec"],["type","text","name","Name","placeholder","","required",""],["type","password","name","Name","placeholder","","required",""],[1,"global_btn","primary_btn"],[1,"or"],[1,"other_logins"],[1,"login_options"],["src","assets/img/facebook.png"],["src","assets/img/google.png"],["src","assets/img/apple.png"],[1,"las","la-envelope"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"span"),t._uU(5,"Confirm and pay"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"app-pricecalculation",7),t.qZA(),t.YNc(10,w,31,0,"div",8),t.qZA(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),t._UZ(15,"img",13),t.qZA(),t.TgZ(16,"div",14)(17,"span"),t._uU(18,"Entire villa"),t.qZA(),t.TgZ(19,"p"),t._uU(20,"Jannat 100% PetFriendly Pool villa with LakeView"),t.qZA(),t.TgZ(21,"div",15)(22,"p"),t._UZ(23,"i",16),t._uU(24," 5.00 (3 reviews)"),t.qZA(),t.TgZ(25,"p"),t._UZ(26,"i",17),t._uU(27," Superhost"),t.qZA()()()(),t.TgZ(28,"p",18),t._uU(29," Your booking is protected by "),t._UZ(30,"img",19),t.qZA(),t.TgZ(31,"h2"),t._uU(32,"Your note for trip"),t.qZA(),t.TgZ(33,"div",20)(34,"label"),t._uU(35,"Note"),t.qZA(),t.TgZ(36,"div",21)(37,"textarea",22),t.NdJ("ngModelChange",function(i){return e.notes=i}),t.qZA()()(),t.TgZ(38,"p",23),t._uU(39," This property requires a \u20b920,000 security deposit. It will be collected separately by the property prior to your arrival or at check-in. "),t.qZA(),t.TgZ(40,"div",24),t._UZ(41,"br"),t.TgZ(42,"a",25),t.NdJ("click",function(){return e.redirectTocheckyachts()}),t.TgZ(43,"span"),t._uU(44," Book Now"),t.qZA()()()()()()()()),2&n&&(t.xp6(9),t.Q6J("productId",e.productId)("showReserveBtn",e.showReserveBtn),t.xp6(1),t.Q6J("ngIf",!e.IsLoggedIn),t.xp6(5),t.s9C("src",null==e.objProduct||null==e.objProduct.objPropertyGalleryInfoList[0]?null:e.objProduct.objPropertyGalleryInfoList[0].imagePath,t.LSH),t.xp6(22),t.Q6J("ngModel",e.notes))},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,y.L],styles:['.inner_page[_ngcontent-%COMP%]{max-width:1120px;margin:0 auto}.breadcrumb[_ngcontent-%COMP%]{margin:30px 0;color:#222;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.breadcrumb[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:11px;margin-right:20px}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;font-weight:600}.order_info[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:flex-start}.order_details[_ngcontent-%COMP%], .order_payment[_ngcontent-%COMP%]{width:46%}.orders_list[_ngcontent-%COMP%]{font-size:16px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:15px}.order_name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.orders_list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{line-height:33px}.orders_list[_ngcontent-%COMP%]:last-child{margin-bottom:0}.edit_sec[_ngcontent-%COMP%]{color:#000;font-size:15px;font-weight:500;padding:10px}.bill_overview[_ngcontent-%COMP%]{padding:24px!important;border:1px solid rgb(221,221,221)!important;border-radius:12px!important}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px}.thumbnail[_ngcontent-%COMP%]{width:30%}.order_indetails[_ngcontent-%COMP%]{width:66%}.order_indetails[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#717171;font-size:12px;margin-bottom:6px;display:inline-block;width:100%}.order_indetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px;display:inline-block;margin-right:10px}.order_indetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin:0}.order_tags[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:13px;display:inline-block;vertical-align:middle;margin:0 10px 0 0;color:gray}.order_tags[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.order_overview[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;padding-bottom:30px;border-bottom:1px solid #DDDDDD}.dates_list[_ngcontent-%COMP%]{padding-bottom:30px;border-bottom:1px solid #DDDDDD;margin-bottom:20px}.covered[_ngcontent-%COMP%]{padding:20px 0;margin:0!important;border-bottom:1px solid #DDDDDD;font-size:15px}.covered[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;padding-left:5px}.price_sec[_ngcontent-%COMP%]{padding:20px 0}.price_sec[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;margin:0;font-size:15px}.price_sec[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:9px 0}.total_amt[_ngcontent-%COMP%]{border-bottom:1px solid #DDDDDD;border-top:1px solid #DDDDDD;padding:11px 0!important;margin-top:20px!important;font-weight:700}.green[_ngcontent-%COMP%]{color:#008a05}.additional_info[_ngcontent-%COMP%]{margin:0}.login_sec[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000;width:100%;padding:7px 10px}.login_sec[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:5px}.login_sec[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:5px}.login_sec[_ngcontent-%COMP%]   .form_group[_ngcontent-%COMP%]{margin-bottom:15px}.login_sec[_ngcontent-%COMP%]   .global_btn[_ngcontent-%COMP%]{width:100%}.or[_ngcontent-%COMP%]{margin:20px 0!important;text-align:center;font-size:11px;position:relative}.or[_ngcontent-%COMP%]:before{content:"";height:1px;background:#DDDDDD;width:calc(50% - 20px);position:absolute;inset:0 auto 0 0;margin:auto;display:inline-block}.or[_ngcontent-%COMP%]:after{content:"";height:1px;background:#DDDDDD;width:calc(50% - 20px);position:absolute;inset:0 0 0 auto;margin:auto;display:inline-block}.other_logins[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:stretch}.other_logins[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center;border:1px solid #cdcdcd;margin-bottom:15px;padding:10px;border-radius:10px;font-size:14px;transition:all .5s ease}.login_options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:30%!important}.other_logins[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:18px}.other_logins[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:19px;display:inline-block;vertical-align:bottom}.other_logins[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f9f9f9;border-color:#9b9b9b}@media screen and (max-width: 1024px){.thumbnail[_ngcontent-%COMP%], .order_indetails[_ngcontent-%COMP%]{width:100%}.thumbnail[_ngcontent-%COMP%]{margin-bottom:15px}.order_details[_ngcontent-%COMP%], .order_payment[_ngcontent-%COMP%]{width:49%}}@media screen and (max-width: 768px){.order_details[_ngcontent-%COMP%], .order_payment[_ngcontent-%COMP%]{width:100%}.bill_overview[_ngcontent-%COMP%]{padding:15px!important}.breadcrumb[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px;margin-right:10px}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.breadcrumb[_ngcontent-%COMP%]{margin:20px 0}.price_sec[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:7px 0}.price_sec[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:14px}}']});var D=o(5741);const Z=[{path:"",component:l}];class g{}g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[p.ez,h.kz,s.UX,u.Bz.forChild(Z),s.u5,C.FA,b.lN,M.XK,D.F]})}}]);